{"ast":null,"code":"var _jsxFileName = \"/home/mohdadil/Desktop/MERN/movies-explorer-mern/frontend/src/components/Rating/RatingComponent.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { fetchRatings } from \"../../redux/slices/moviesSlice\";\nimport IconButton from \"@mui/material/IconButton\";\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\nimport StarIcon from \"@mui/icons-material/Star\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RatingComponent = ({\n  movieId,\n  handleRatingClick,\n  initialRating,\n  userId,\n  userName\n}) => {\n  _s();\n  const [rating, setRating] = useState(initialRating);\n  const dispatch = useDispatch(); // Apply the correct type\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\n  useEffect(() => {\n    const fetchRatingsData = async () => {\n      if (movieId) {\n        try {\n          const response = await dispatch(fetchRatings(movieId)).unwrap();\n          const userRating = response.ratings.find(r => r.userId === userId);\n          setRating(userRating ? userRating.rating : null);\n        } catch (error) {\n          console.error(\"Failed to fetch ratings\", error);\n        }\n      }\n    };\n    fetchRatingsData();\n  }, [movieId, dispatch, userId]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [1, 2, 3, 4, 5].map(value => /*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: () => handleRatingClick(value)\n      //disabled={!isLoggedIn}\n      ,\n      children: rating && rating >= value ? /*#__PURE__*/_jsxDEV(StarIcon, {\n        sx: {\n          color: \"yellow\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(StarBorderIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, this)\n    }, value, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this))\n  }, void 0, false);\n};\n_s(RatingComponent, \"pg/Xpck7k9rDD33fgAbbFnkQrs4=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = RatingComponent;\nexport default RatingComponent;\nvar _c;\n$RefreshReg$(_c, \"RatingComponent\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","fetchRatings","IconButton","StarBorderIcon","StarIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","RatingComponent","movieId","handleRatingClick","initialRating","userId","userName","_s","rating","setRating","dispatch","isLoggedIn","state","user","fetchRatingsData","response","unwrap","userRating","ratings","find","r","error","console","children","map","value","onClick","sx","color","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/mohdadil/Desktop/MERN/movies-explorer-mern/frontend/src/components/Rating/RatingComponent.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { RootState, AppDispatch } from \"../../redux/store\";\nimport { fetchRatings } from \"../../redux/slices/moviesSlice\";\nimport IconButton from \"@mui/material/IconButton\";\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\nimport StarIcon from \"@mui/icons-material/Star\";\n\ninterface RatingComponentProps {\n  isLoggedIn: boolean;\n  initialRating: number | null;\n  movieId: string;\n  userId: string;\n  userName: string;\n  handleRatingClick: (value: number) => void;\n}\n\nconst RatingComponent: React.FC<RatingComponentProps> = ({\n  movieId,\n handleRatingClick,\n  initialRating,\n  userId,\n  userName,\n}) => {\n  const [rating, setRating] = useState<number | null>(initialRating);\n  const dispatch: AppDispatch = useDispatch(); // Apply the correct type\n  const isLoggedIn = useSelector((state: RootState) => state.user.isLoggedIn);\n\n  useEffect(() => {\n    const fetchRatingsData = async () => {\n      if (movieId) {\n        try {\n          const response = await dispatch(fetchRatings(movieId)).unwrap();\n          const userRating = response.ratings.find(\n            (r: { userId: string; rating: number }) => r.userId === userId\n          );\n          setRating(userRating ? userRating.rating : null);\n        } catch (error) {\n          console.error(\"Failed to fetch ratings\", error);\n        }\n      }\n    };\n\n    fetchRatingsData();\n  }, [movieId, dispatch, userId]);\n\n  return (\n    <>\n      {[1, 2, 3, 4, 5].map((value) => (\n        <IconButton\n          key={value}\n          onClick={() => handleRatingClick(value)}\n          //disabled={!isLoggedIn}\n        >\n          {rating && rating >= value ? (\n            <StarIcon sx={{ color: \"yellow\" }} />\n          ) : (\n            <StarBorderIcon />\n          )}\n        </IconButton>\n      ))}\n    </>\n  );\n};\n\nexport default RatingComponent;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AAEtD,SAASC,YAAY,QAAQ,gCAAgC;AAC7D,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,OAAOC,QAAQ,MAAM,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAWhD,MAAMC,eAA+C,GAAGA,CAAC;EACvDC,OAAO;EACRC,iBAAiB;EAChBC,aAAa;EACbC,MAAM;EACNC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAAgBe,aAAa,CAAC;EAClE,MAAMM,QAAqB,GAAGlB,WAAW,CAAC,CAAC,CAAC,CAAC;EAC7C,MAAMmB,UAAU,GAAGpB,WAAW,CAAEqB,KAAgB,IAAKA,KAAK,CAACC,IAAI,CAACF,UAAU,CAAC;EAE3ErB,SAAS,CAAC,MAAM;IACd,MAAMwB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAIZ,OAAO,EAAE;QACX,IAAI;UACF,MAAMa,QAAQ,GAAG,MAAML,QAAQ,CAACjB,YAAY,CAACS,OAAO,CAAC,CAAC,CAACc,MAAM,CAAC,CAAC;UAC/D,MAAMC,UAAU,GAAGF,QAAQ,CAACG,OAAO,CAACC,IAAI,CACrCC,CAAqC,IAAKA,CAAC,CAACf,MAAM,KAAKA,MAC1D,CAAC;UACDI,SAAS,CAACQ,UAAU,GAAGA,UAAU,CAACT,MAAM,GAAG,IAAI,CAAC;QAClD,CAAC,CAAC,OAAOa,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QACjD;MACF;IACF,CAAC;IAEDP,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACZ,OAAO,EAAEQ,QAAQ,EAAEL,MAAM,CAAC,CAAC;EAE/B,oBACEP,OAAA,CAAAE,SAAA;IAAAuB,QAAA,EACG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAACC,GAAG,CAAEC,KAAK,iBACzB3B,OAAA,CAACJ,UAAU;MAETgC,OAAO,EAAEA,CAAA,KAAMvB,iBAAiB,CAACsB,KAAK;MACtC;MAAA;MAAAF,QAAA,EAECf,MAAM,IAAIA,MAAM,IAAIiB,KAAK,gBACxB3B,OAAA,CAACF,QAAQ;QAAC+B,EAAE,EAAE;UAAEC,KAAK,EAAE;QAAS;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,gBAErClC,OAAA,CAACH,cAAc;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAClB,GARIP,KAAK;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OASA,CACb;EAAC,gBACF,CAAC;AAEP,CAAC;AAACzB,EAAA,CA9CIN,eAA+C;EAAA,QAQrBT,WAAW,EACtBD,WAAW;AAAA;AAAA0C,EAAA,GAT1BhC,eAA+C;AAgDrD,eAAeA,eAAe;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}