{"ast":null,"code":"import{useState}from\"react\";import{useDispatch}from\"react-redux\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import{yupResolver}from\"@hookform/resolvers/yup\";import axios from\"axios\";import registerSchema from\"../utils/ValidatioSchema/ValidationSchema\";import{toast}from\"react-toastify\";const useRegister=()=>{const dispatch=useDispatch();const navigate=useNavigate();const methods=useForm({resolver:yupResolver(registerSchema)});const{handleSubmit,formState}=methods;const[registrationError,setRegistrationError]=useState(null);const onSubmit=async data=>{try{const res=await axios.post(\"https://movies-explorer-mern.onrender.com/api/v1/register\",data);if(res.data.success){const{user,token}=res.data;//  dispatch(\n//    login({\n//      id: user._id,\n//      name: user.name,\n//      email: user.email,\n//      phone: user.phone,\n//      token, // Include token here\n//    })\n//  );\nsetRegistrationError(null);navigate(\"/login\");toast.success(\"Successfully Registerd\");}else{setRegistrationError(res.data.message);}}catch(error){console.error(error);setRegistrationError(\"Failed to register. Please try again.\");}};return{...methods,handleSubmit,onSubmit,formState,registrationError};};export default useRegister;","map":{"version":3,"names":["useState","useDispatch","useForm","useNavigate","yupResolver","axios","registerSchema","toast","useRegister","dispatch","navigate","methods","resolver","handleSubmit","formState","registrationError","setRegistrationError","onSubmit","data","res","post","success","user","token","message","error","console"],"sources":["/home/mohdadil/Desktop/MERN/movies-explorer-mern/frontend/src/hooks/useRegister.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useForm, UseFormReturn } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport axios, { AxiosError } from \"axios\";\nimport { login } from \"../redux/slices/userSlice\";\nimport registerSchema from \"../utils/ValidatioSchema/ValidationSchema\";\nimport { RegisterFormInputs } from \"../utils/interface/types\";\nimport { ErrorCallback } from \"typescript\";\nimport { toast } from \"react-toastify\";\n\ninterface UseRegisterReturn extends UseFormReturn<RegisterFormInputs> {\n  onSubmit: (data: RegisterFormInputs) => void;\n  registrationError: string | null;\n}\n\nconst useRegister = (): UseRegisterReturn => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const methods = useForm<RegisterFormInputs>({\n    resolver: yupResolver(registerSchema),\n  });\n\n  const { handleSubmit, formState } = methods;\n  const [registrationError, setRegistrationError] = useState<string | null>(\n    null\n  );\n\n  const onSubmit = async (data: RegisterFormInputs) => {\n    try {\n      const res = await axios.post(\n        \"https://movies-explorer-mern.onrender.com/api/v1/register\",\n        data\n      );\n     if (res.data.success) {\n       const { user, token } = res.data; \n      //  dispatch(\n      //    login({\n      //      id: user._id,\n      //      name: user.name,\n      //      email: user.email,\n      //      phone: user.phone,\n      //      token, // Include token here\n      //    })\n      //  );\n\n       setRegistrationError(null);\n       navigate(\"/login\");\n       toast.success(\"Successfully Registerd\");\n     } else {\n       setRegistrationError(res.data.message);\n     }\n    } catch (error) {\n      console.error(error);\n      setRegistrationError(\"Failed to register. Please try again.\");\n    }\n  };\n\n  return {\n    ...methods,\n    handleSubmit,\n    onSubmit,\n    formState,\n    registrationError,\n  };\n};\n\nexport default useRegister;\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,OAAO,KAAuB,iBAAiB,CACxD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,yBAAyB,CACrD,MAAO,CAAAC,KAAK,KAAsB,OAAO,CAEzC,MAAO,CAAAC,cAAc,KAAM,2CAA2C,CAGtE,OAASC,KAAK,KAAQ,gBAAgB,CAOtC,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAyB,CAC3C,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAQ,OAAO,CAAGT,OAAO,CAAqB,CAC1CU,QAAQ,CAAER,WAAW,CAACE,cAAc,CACtC,CAAC,CAAC,CAEF,KAAM,CAAEO,YAAY,CAAEC,SAAU,CAAC,CAAGH,OAAO,CAC3C,KAAM,CAACI,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGhB,QAAQ,CACxD,IACF,CAAC,CAED,KAAM,CAAAiB,QAAQ,CAAG,KAAO,CAAAC,IAAwB,EAAK,CACnD,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAd,KAAK,CAACe,IAAI,CAC1B,2DAA2D,CAC3DF,IACF,CAAC,CACF,GAAIC,GAAG,CAACD,IAAI,CAACG,OAAO,CAAE,CACpB,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGJ,GAAG,CAACD,IAAI,CACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAECF,oBAAoB,CAAC,IAAI,CAAC,CAC1BN,QAAQ,CAAC,QAAQ,CAAC,CAClBH,KAAK,CAACc,OAAO,CAAC,wBAAwB,CAAC,CACzC,CAAC,IAAM,CACLL,oBAAoB,CAACG,GAAG,CAACD,IAAI,CAACM,OAAO,CAAC,CACxC,CACD,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACpBT,oBAAoB,CAAC,uCAAuC,CAAC,CAC/D,CACF,CAAC,CAED,MAAO,CACL,GAAGL,OAAO,CACVE,YAAY,CACZI,QAAQ,CACRH,SAAS,CACTC,iBACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAP,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}