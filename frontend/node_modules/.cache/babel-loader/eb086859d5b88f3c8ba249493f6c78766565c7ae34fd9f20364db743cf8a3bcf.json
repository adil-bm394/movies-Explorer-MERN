{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nconst useLogin = () => {\n  _s();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    reset\n  } = useForm();\n  const [loginError, setLoginError] = useState(null);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const onSubmit = async data => {\n    try {\n      const response = await axios.post(\"http://localhost:8000/api/v1/login\", data);\n      if (response.data.success) {\n        const {\n          user,\n          token\n        } = response.data;\n        setLoginError(null);\n        // dispatch(\n        //   login({\n        //     id: user._id,\n        //     name: user.name,\n        //     email: user.email,\n        //     phone: user.phone,\n        //     token,\n        //   })\n        // );\n        localStorage.setItem(\"authToken\", token);\n        localStorage.setItem(\"userDetails\", JSON.stringify(user));\n        navigate(\"/\");\n        toast.success(\"Login Successfully\");\n      } else {\n        setLoginError(response.data.message || \"Login failed. Please try again.\");\n      }\n    } catch (err) {\n      console.error(err);\n      setLoginError(\"An error occurred during login\");\n    }\n  };\n  return {\n    register,\n    handleSubmit,\n    onSubmit,\n    errors,\n    loginError\n  };\n};\n_s(useLogin, \"l0+vUgHpRBUi2kvJs1qvq/WkOvI=\", false, function () {\n  return [useForm, useNavigate, useDispatch];\n});\nexport default useLogin;","map":{"version":3,"names":["useState","useForm","useNavigate","useDispatch","axios","toast","useLogin","_s","register","handleSubmit","formState","errors","reset","loginError","setLoginError","navigate","dispatch","onSubmit","data","response","post","success","user","token","localStorage","setItem","JSON","stringify","message","err","console","error"],"sources":["/home/mohdadil/Desktop/MERN/movies-explorer-mern/frontend/src/hooks/useLogin.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport { login } from \"../redux/slices/userSlice\";\nimport { toast } from \"react-toastify\";\nimport { LoginFormInputs } from \"../utils/interface/types\";\n\nconst useLogin = () => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n  } = useForm<LoginFormInputs>();\n  const [loginError, setLoginError] = useState<string | null>(null);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  const onSubmit = async (data: LoginFormInputs) => {\n    try {\n      const response = await axios.post(\n        \"http://localhost:8000/api/v1/login\",\n        data\n      );\n      if (response.data.success) {\n        const { user, token } = response.data;\n        setLoginError(null);\n        // dispatch(\n        //   login({\n        //     id: user._id,\n        //     name: user.name,\n        //     email: user.email,\n        //     phone: user.phone,\n        //     token,\n        //   })\n        // );\n        localStorage.setItem(\"authToken\", token);\n        localStorage.setItem(\"userDetails\", JSON.stringify(user));\n        navigate(\"/\");\n        toast.success(\"Login Successfully\");\n      } else {\n        setLoginError(\n          response.data.message || \"Login failed. Please try again.\"\n        );\n      }\n    } catch (err) {\n      console.error(err);\n      setLoginError(\"An error occurred during login\");\n    }\n  };\n\n  return {\n    register,\n    handleSubmit,\n    onSubmit,\n    errors,\n    loginError,\n  };\n};\n\nexport default useLogin;\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,aAAa;AACzC,OAAOC,KAAK,MAAM,OAAO;AAEzB,SAASC,KAAK,QAAQ,gBAAgB;AAGtC,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM;IACJC,QAAQ;IACRC,YAAY;IACZC,SAAS,EAAE;MAAEC;IAAO,CAAC;IACrBC;EACF,CAAC,GAAGX,OAAO,CAAkB,CAAC;EAC9B,MAAM,CAACY,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAgB,IAAI,CAAC;EACjE,MAAMe,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAC9B,MAAMc,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAE9B,MAAMc,QAAQ,GAAG,MAAOC,IAAqB,IAAK;IAChD,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAC/B,oCAAoC,EACpCF,IACF,CAAC;MACD,IAAIC,QAAQ,CAACD,IAAI,CAACG,OAAO,EAAE;QACzB,MAAM;UAAEC,IAAI;UAAEC;QAAM,CAAC,GAAGJ,QAAQ,CAACD,IAAI;QACrCJ,aAAa,CAAC,IAAI,CAAC;QACnB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAU,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEF,KAAK,CAAC;QACxCC,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,CAAC;QACzDP,QAAQ,CAAC,GAAG,CAAC;QACbV,KAAK,CAACgB,OAAO,CAAC,oBAAoB,CAAC;MACrC,CAAC,MAAM;QACLP,aAAa,CACXK,QAAQ,CAACD,IAAI,CAACU,OAAO,IAAI,iCAC3B,CAAC;MACH;IACF,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBf,aAAa,CAAC,gCAAgC,CAAC;IACjD;EACF,CAAC;EAED,OAAO;IACLN,QAAQ;IACRC,YAAY;IACZQ,QAAQ;IACRN,MAAM;IACNE;EACF,CAAC;AACH,CAAC;AAACN,EAAA,CAnDID,QAAQ;EAAA,QAMRL,OAAO,EAEMC,WAAW,EACXC,WAAW;AAAA;AA4C9B,eAAeG,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}